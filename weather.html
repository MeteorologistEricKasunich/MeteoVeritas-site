<!doctype html>
<html lang="en">
<head>
<meta charset="utf-8">
<title>Weather Center | MeteoVeritas</title>
<meta name="viewport" content="width=device-width, initial-scale=1">
<link rel="stylesheet" href="/assets/css/styles.css">
</head>
<body>
<header class="mv-header">
  <a class="mv-logo" href="/"><img src="/assets/img/placeholder-logo.svg" alt="MeteoVeritas logo" width="160" height="48"></a>
  <nav class="mv-nav">
    <a href="/weather.html" class="active">Weather Center</a>
    <a href="/wbgt.html">WBGT Center</a>
    <a href="/consulting.html">Consulting</a>
    <a href="/contact.html" class="mv-cta-btn">Request Services</a>
  </nav>
</header>

<main class="mv-weather-wrapper">
  <h1>Live Weather Center</h1>
  <p>Enter a U.S. location (city or ZIP). We’ll pull the latest NWS forecast &amp; current conditions.</p>
  <form id="mv-weather-search">
    <input type="text" id="location" placeholder="e.g., Dunedin, FL or 34698">
    <button type="submit" class="mv-btn-primary">Get Weather</button>
  </form>

  <!-- Forecast Results -->
<div id="mv-weather-results" class="mv-weather-results"></div>

  <div id="mv-weather-results" class="mv-weather-results">
    <!-- JS injects forecast cards here -->
  </div>

  <iframe
  src="https://www.rainviewer.com/map.html?loc=28.01,-82.78,8&oFa=0&oC=0&oU=0&oCS=1&oF=0&oAP=0&c=0&o=83&lm=1&layer=radar&sm=1&sn=1&hu=0"
  width="100%"
  height="600"
  frameborder="0"
  style="border:0;"
  allowfullscreen
></iframe>

  <h2>7-Day Forecast</h2>
<div id="seven-day-forecast" class="mv-forecast-vertical"></div>
  
  <h2>Radar (static placeholder)</h2>
  <p>Hi-Res Future Forecast coming soon.</p>
  <img src="https://placehold.co/600x300?text=Forecast+Goes+Here" alt="Radar placeholder">
</main>

<footer class="mv-footer">
  <p>Data: National Weather Service (NWS). </p>
  <p>© <span id="mv-year"></span> MeteoVeritas.</p>
</footer>
<script src="/assets/js/main.js"></script>

<script>
async function loadNWSForecast(zip = "34698") {
  const url = `https://api.weather.gov/points/${zip}`;
  try {
    const pointResp = await fetch(url);
    const pointData = await pointResp.json();
    const forecastUrl = pointData.properties.forecast;

    const forecastResp = await fetch(forecastUrl);
    const forecastData = await forecastResp.json();
    const periods = forecastData.properties.periods.slice(0, 7); // 7-day

    const container = document.getElementById("seven-day-forecast");
    container.innerHTML = "";

    periods.forEach(period => {
      const card = document.createElement("div");
      card.className = "mv-forecast-day";
      card.innerHTML = `
        <div class="mv-forecast-header">${period.name}</div>
        <img src="${period.icon}" alt="${period.shortForecast}" class="mv-forecast-icon">
        <div class="mv-forecast-temps">${period.temperature}°${period.temperatureUnit}</div>
        <p class="mv-forecast-text">${period.shortForecast}</p>
      `;
      container.appendChild(card);
    });
  } catch (error) {
    console.error("Failed to load NWS forecast:", error);
  }
}

loadNWSForecast();
</script>
  
</body>
</html>
